# ============================================================
# FineTuneFlow — Environment Variables
# ============================================================
# Copy this file to .env and fill in the values.
# ============================================================

# ────────────────────────────────────────────────────────────
# PostgreSQL
# ────────────────────────────────────────────────────────────
POSTGRES_USER=finetune
POSTGRES_PASSWORD=finetune
POSTGRES_DB=finetuneflow
DATABASE_URL=postgresql+psycopg2://finetune:finetune@postgres:5432/finetuneflow
# For async (SQLAlchemy async engine):
# DATABASE_URL_ASYNC=postgresql+asyncpg://finetune:finetune@postgres:5432/finetuneflow

# ────────────────────────────────────────────────────────────
# Redis
# ────────────────────────────────────────────────────────────
REDIS_URL=redis://redis:6379/0

# ────────────────────────────────────────────────────────────
# Storage
# ────────────────────────────────────────────────────────────
STORAGE_ROOT=/app/storage

# ────────────────────────────────────────────────────────────
# Ollama Cloud API
# ────────────────────────────────────────────────────────────
# Create an account at https://ollama.com and generate an API key.
OLLAMA_CLOUD_BASE_URL=https://api.ollama.com
OLLAMA_CLOUD_API_KEY=CHANGE_ME
OLLAMA_MODEL=llama3.1:70b

# Ollama generation parameters
OLLAMA_TEMPERATURE=0.7
OLLAMA_MAX_TOKENS=4096
OLLAMA_TIMEOUT_SECONDS=60

# ────────────────────────────────────────────────────────────
# Upload Limits
# ────────────────────────────────────────────────────────────
MAX_FILE_SIZE_MB=50
MAX_PROJECT_TOTAL_SIZE_MB=500
MAX_FILES_PER_UPLOAD=20
MAX_FILES_PER_PROJECT=100

# ────────────────────────────────────────────────────────────
# Training Defaults
# ────────────────────────────────────────────────────────────
DEFAULT_NUM_EPOCHS=3
DEFAULT_LEARNING_RATE=0.0002
DEFAULT_BATCH_SIZE=4
DEFAULT_MAX_SEQ_LENGTH=2048
DEFAULT_LORA_R=16
DEFAULT_LORA_ALPHA=32

# ────────────────────────────────────────────────────────────
# Dataset Generation
# ────────────────────────────────────────────────────────────
DEFAULT_NUM_EXAMPLES_TARGET=2000
DEFAULT_EXAMPLES_PER_CHUNK=5
DEFAULT_CHUNK_SIZE_TOKENS=512
DEFAULT_CHUNK_OVERLAP_TOKENS=50
DEFAULT_TRAIN_EVAL_SPLIT=0.9
DEFAULT_PREVIEW_EXAMPLES=10

# ────────────────────────────────────────────────────────────
# Celery
# ────────────────────────────────────────────────────────────
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1

# ────────────────────────────────────────────────────────────
# Frontend
# ────────────────────────────────────────────────────────────
NEXT_PUBLIC_API_BASE=http://localhost:8000

# ────────────────────────────────────────────────────────────
# Logging
# ────────────────────────────────────────────────────────────
LOG_LEVEL=INFO
# LOG_FORMAT=json  # or "console" for dev

# ────────────────────────────────────────────────────────────
# HuggingFace (optional — for gated models)
# ────────────────────────────────────────────────────────────
# HF_TOKEN=hf_xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
